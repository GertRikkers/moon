<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Moon | Todo">
		<meta name="author" content="Kabir Shah">

		<title>Moon | Todo</title>

		<link rel="stylesheet" type="text/css" href="../../css/lib/wing.min.css" />

		<style>
			.todo {
				font-size: 30px;
			}

			.complete {
				color: #E6E6E6;
				text-decoration: line-through;
			}
		</style>
	</head>
	<body>
		<div id="root"></div>

		<script type="text/mvl" id="template">
			<div class="flex direction-vertical justify-center size-full-height container">
				<div class="todos">
					<p For={$todo in todos} class={"todo" + ($todo.complete ? " complete" : "")} @click={completeTodo($todo)}>{$todo.value}</p>
				</div>

				<input type="text" placeholder="Your todo" @bind={value} @keydown={createTodo($event)} />
			</div>
		</script>


		<script src="../../../dist/moon.min.js"></script>
		<script>
			Moon({
				root: "#root",
				view: document.getElementById("template").innerHTML,

				value: "",
				todos: [],

				createTodo: function($event) {
					if ($event.keyCode === 13) {
						this.todos.push({
							value: this.value,
							complete: false
						});

						this.value = "";

						this.update();
					}
				},

				completeTodo: function(todo) {
					todo.complete = !todo.complete;
					this.update();
				}
			});
		</script>
	</body>
</html>
